<div class="order-detail-page">
    <div class="order-group">
        <ul class="order-list">
            <li class="order-list-one">
                <div class="order-title">
                    <span class="order-head">订单详细信息</span>
                    <span class="order-status">共{{vm.price}}元</span>
                </div>
                <ul class="order-books">
                    <a class="order-book" ng-repeat="z in vm.order.carts"
                       ui-sref="book({isbn: z.book.isbn})">
                        <img ng-src="{{z.book.image}}">
                        <p>{{z.book.title}}</p>
                        <small ng-repeat="x in z.book.author"><small>{{x}} </small></small>
                        <span class="count"> {{z.number}}本 / 共{{z.price*z.number | number:2}}元</span>
                    </a>
                </ul>
                <div class="order-detail">
                    <div class="order-title">
                        <span class="order-head">订单状态</span>
                        <span class="order-status">{{vm.order.status}}</span>
                    </div>
                    <ul class="order-process">
                        <li ng-repeat="x in vm.status_list">
                            <span>{{x.status}}</span>
                            <span>{{x.time*1000 | date:'yyyy-MM-dd HH:mm'}}</span>
                        </li>
                    </ul>
                </div>
                <div class="order-receipt">
                    <div class="order-title">
                        <span class="order-head">订单收货信息</span>
                    </div>
                    <div class="order-receipt-meta">
                        <p>收货人: {{vm.order.address.name}}</p>
                        <p>联系电话: {{vm.order.address.phone}}</p>
                        <p>收货地址: {{vm.order.address.dormitory}}</p>
                    </div>
                </div>
                <div class="order-detail-clear"></div>
                <div class="order-meta order-meta-fix-bottom">
                    <div class="order-meta-price">
                        <span class="order-price">货到付款&nbsp;&nbsp;&nbsp;<em>{{vm.price}}</em> 元</span>
                    </div>
                    <a class="btn btn-danger"
                       ng-if="vm.order.status=='待评价'"
                       style="width: 95px;" ui-sref="orderComments({id: order.id})">
                        评价
                    </a>
                    <button class="btn btn-danger"
                            ng-if="vm.order.status=='待收货'"
                            ng-click="vm.receipt(vm.order)">
                        确认收货
                    </button>
                    <button class="btn btn-danger" promise-btn
                            ng-if="vm.order.status=='待发货'"
                            ng-click="vm.cancel(vm.order)">
                        取消订单
                    </button>
                    <button class="btn btn-danger"
                            ng-if="vm.order.status=='已取消'"
                            style="width: 95px;" disabled>
                        已取消
                    </button>
                </div>
            </li>
        </ul>
    </div>
</div>